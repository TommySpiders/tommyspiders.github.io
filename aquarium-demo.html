<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Aquarium Game</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

<style>

/* -------------------------------------
   FORCE LANDSCAPE MODE
-------------------------------------- */
@media screen and (orientation:portrait) {
  body::before {
    content: "Please rotate your device";
    position: fixed;
    inset: 0;
    background: black;
    color: white;
    font-size: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 99999;
  }
}

/* -------------------------------------
   PAGE BASE
-------------------------------------- */
body {
  margin: 0;
  overflow: hidden;
  background: black;
  font-family: system-ui, sans-serif;
}

/* -------------------------------------
   CAMERA (PAN + ZOOM)
-------------------------------------- */
#camera {
  position: fixed;
  inset: 0;
  overflow: hidden;
  touch-action: none;
}

/* -------------------------------------
   WORLD (3√ó wider tank)
-------------------------------------- */
#world {
  position: absolute;
  left: 0;
  top: 0;
  width: 300vw;        /* 3√ó world width */
  height: 100vh;
  background-image: url("bg-underwater.PNG");
  background-size: 300vw 100vh;   /* stretch across world */
  background-repeat: no-repeat;
}

/* -------------------------------------
   WATER TEXTURE OVERLAY
-------------------------------------- */
#waterOverlay {
  position: absolute;
  inset: 0;
  opacity: 0.12;
  pointer-events: none;
  background-image:
    radial-gradient(circle at 10% 20%, rgba(255,255,255,0.20), transparent 55%),
    radial-gradient(circle at 80% 30%, rgba(255,255,255,0.18), transparent 55%),
    radial-gradient(circle at 50% 80%, rgba(255,255,255,0.14), transparent 55%);
  background-size: 240% 240%;
  animation: drift 20s linear infinite;
}

@keyframes drift {
  0% { transform: translate3d(0,0,0) scale(1.05); }
  50% { transform: translate3d(-4%,3%,0) scale(1.08); }
  100% { transform: translate3d(4%,-3%,0) scale(1.05); }
}

/* -------------------------------------
   FISH LAYER
-------------------------------------- */
#fishLayer {
  position: absolute;
  inset: 0;
  width: 300vw;
  height: 100vh;
  overflow: visible;
}

/* -------------------------------------
   FISH (smooth AI, rotation)
-------------------------------------- */
.fish {
  position: absolute;
  width: 80px;
  height: 38px;
  background: linear-gradient(90deg, #ff9966, #ff5e7a, #ff2e9e);
  border-radius: 60px 50px 50px 60px;
  box-shadow: 0 0 10px rgba(0,0,0,0.6);
  pointer-events: auto;
  transform-origin: center center;
}

.fish::before {
  content: "";
  position: absolute;
  right: -18px;
  top: 50%;
  width: 26px;
  height: 24px;
  background: linear-gradient(90deg, #ff5e7a, #ff2e9e);
  border-radius: 0 70% 70% 0;
  transform: translateY(-50%);
}

.fish::after {
  content: "";
  position: absolute;
  left: 12px;
  top: 13px;
  width: 9px;
  height: 9px;
  background: black;
  border-radius: 50%;
  box-shadow: 0 0 0 3px rgba(255,255,255,0.4);
}

/* -------------------------------------
   UI BUTTONS (60px shiny bubbles)
-------------------------------------- */
.bubbleBtn {
  position: fixed;
  width: 60px;
  height: 60px;
  background: radial-gradient(circle at 30% 30%, #ffffff, #b7e4ff, #5bc2ff);
  border-radius: 50%;
  border: 2px solid rgba(255,255,255,0.5);
  box-shadow: 0 0 14px rgba(0,140,255,0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 26px;
  cursor: pointer;
  user-select: none;
  transition: transform .1s ease;
  z-index: 5000;
}

.bubbleBtn:active {
  transform: scale(0.9);
}

/* LEFT UI */
#feedBtn { left: 20px; top: 20%; }
#cleanBtn { left: 20px; top: 40%; }

/* RIGHT UI */
#buyBtn { right: 20px; top: 20%; }
#shopBtn { right: 20px; top: 40%; }

/* -------------------------------------
   COIN BUBBLE (TOP RIGHT)
-------------------------------------- */
#coinBubble {
  position: fixed;
  top: 18px;
  right: 18px;
  width: 70px;
  height: 70px;
  border-radius: 50%;
  background: radial-gradient(circle at 30% 30%, #fff4a6, #e1a800);
  border: 2px solid rgba(255,255,255,0.5);
  box-shadow: 0 0 14px rgba(255,210,100,0.7);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  color: #603800;
  font-weight: bold;
  user-select: none;
  z-index: 5000;
}

/* -------------------------------------
   GLASS FISH INFO PANEL
-------------------------------------- */
#fishInfoPanel {
  position: fixed;
  left: 50%;
  top: 50%;
  width: 300px;
  padding: 18px;
  transform: translate(-50%, -50%);
  background: rgba(255,255,255,0.15);
  backdrop-filter: blur(12px);
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,0.45);
  color: white;
  display: none;
  z-index: 9000;
}

#closeFishInfo {
  margin-top: 12px;
  padding: 8px;
  background: rgba(255,255,255,0.25);
  border: 1px solid rgba(255,255,255,0.4);
  border-radius: 10px;
  cursor: pointer;
  text-align: center;
}

</style>
</head>
<body>

<!-- CAMERA WRAPPER -->
<div id="camera">
  <div id="world">
    <div id="waterOverlay"></div>
    <div id="fishLayer"></div>
  </div>
</div>

<!-- COIN DISPLAY -->
<div id="coinBubble">
  ü™ô
  <div id="coinCount">80</div>
</div>

<!-- LEFT BUTTONS -->
<div id="feedBtn" class="bubbleBtn">üç§</div>
<div id="cleanBtn" class="bubbleBtn">üßΩ</div>

<!-- RIGHT BUTTONS -->
<div id="buyBtn" class="bubbleBtn">üê†</div>
<div id="shopBtn" class="bubbleBtn">üõí</div>

<!-- FISH INFO PANEL -->
<div id="fishInfoPanel">
  <h2 id="fishName">Fish</h2>
  <p><strong>Health:</strong> <span id="fishHealth"></span>%</p>
  <p><strong>Hunger:</strong> <span id="fishHunger"></span>%</p>
  <p><strong>Value:</strong> <span id="fishValue"></span></p>
  <p><strong>Age:</strong> <span id="fishAge"></span> days</p>

  <div id="closeFishInfo">Close</div>
</div>

<script>

/* -------------------------------------
   GAME STATE
-------------------------------------- */
let coins = 80;
let fishList = [];
let nextFishId = 1;

document.getElementById("coinCount").textContent = coins;

/* -------------------------------------
   CAMERA MOVEMENT & ZOOM
-------------------------------------- */
let camX = 0;
let camY = 0;
let camScale = 1;

let lastTouchDist = null;
let lastX = null;
let lastY = null;

const camera = document.getElementById("camera");
const world = document.getElementById("world");

/* Bounded camera */
function updateCamera() {
  world.style.transform =
    `translate(${camX}px, ${camY}px) scale(${camScale})`;
}

/* Distance between two touches */
function getDist(e) {
  return Math.hypot(
    e.touches[0].clientX - e.touches[1].clientX,
    e.touches[0].clientY - e.touches[1].clientY
  );
}

/* TOUCH BEGIN */
camera.addEventListener("touchstart", e => {
  if (e.touches.length === 1) {
    lastX = e.touches[0].clientX;
    lastY = e.touches[0].clientY;
  } else if (e.touches.length === 2) {
    lastTouchDist = getDist(e);
  }
});

/* TOUCH MOVE */
camera.addEventListener("touchmove", e => {
  e.preventDefault();

  /* PINCH ZOOM */
  if (e.touches.length === 2) {
    let newDist = getDist(e);
    let scaleChange = newDist / lastTouchDist;
    camScale *= scaleChange;
    camScale = Math.max(0.6, Math.min(camScale, 2.8));
    lastTouchDist = newDist;
    updateCamera();
    return;
  }

  /* DRAG */
  if (e.touches.length === 1) {
    let x = e.touches[0].clientX;
    let y = e.touches[0].clientY;

    camX += (x - lastX);
    camY += (y - lastY);

    lastX = x;
    lastY = y;

    updateCamera();
  }
});

/* -------------------------------------
   ADD FISH
-------------------------------------- */
function addFish() {
  if (coins < 20) return;
  coins -= 20;
  document.getElementById("coinCount").textContent = coins;

  const id = nextFishId++;
  const fish = {
    id,
    x: Math.random() * window.innerWidth * 3,
    y: Math.random() * window.innerHeight,
    angle: Math.random() * Math.PI * 2,
    speed: 0.8 + Math.random() * 1.2,
    health: 100,
    hunger: 0,
    age: 0,
    value: 10
  };

  const el = document.createElement("div");
  el.className = "fish";
  el.dataset.id = id;
  el.style.left = fish.x + "px";
  el.style.top = fish.y + "px";

  el.addEventListener("click", () => showFishInfo(fish));

  fish.el = el;
  fishList.push(fish);
  document.getElementById("fishLayer").appendChild(el);
}

/* -------------------------------------
   FISH INFO POPUP
-------------------------------------- */
function showFishInfo(f) {
  document.getElementById("fishName").textContent = "Fish #" + f.id;
  document.getElementById("fishHealth").textContent = f.health;
  document.getElementById("fishHunger").textContent = f.hunger;
  document.getElementById("fishValue").textContent = f.value;
  document.getElementById("fishAge").textContent = f.age;
  document.getElementById("fishInfoPanel").style.display = "block";
}

document.getElementById("closeFishInfo").onclick = () => {
  document.getElementById("fishInfoPanel").style.display = "none";
};

/* -------------------------------------
   FEED
-------------------------------------- */
document.getElementById("feedBtn").onclick = () => {
  if (coins < 5) return;
  coins -= 5;
  document.getElementById("coinCount").textContent = coins;
  fishList.forEach(f => f.hunger = Math.max(0, f.hunger - 35));
};

/* -------------------------------------
   CLEAN
-------------------------------------- */
document.getElementById("cleanBtn").onclick = () => {
  if (coins < 10) return;
  coins -= 10;
  document.getElementById("coinCount").textContent = coins;
  fishList.forEach(f => f.health = Math.min(100, f.health + 20));
};

/* -------------------------------------
   BUY FISH
-------------------------------------- */
document.getElementById("buyBtn").onclick = addFish;

/* -------------------------------------
   SHOP BUTTON
-------------------------------------- */
document.getElementById("shopBtn").onclick = () => {
  alert("Shop coming soon!");
};

/* -------------------------------------
   FISH MOVEMENT AI (smooth curved)
-------------------------------------- */
function updateFish() {
  for (let f of fishList) {

    /* Slight angle drift */
    f.angle += (Math.random() - 0.5) * 0.12;

    /* Move */
    f.x += Math.cos(f.angle) * f.speed;
    f.y += Math.sin(f.angle) * f.speed;

    /* Boundaries */
    if (f.x < 0) { f.x = 0; f.angle += Math.PI; }
    if (f.x > window.innerWidth * 3 - 80) { f.x = window.innerWidth * 3 - 80; f.angle += Math.PI; }
    if (f.y < 0) { f.y = 0; f.angle = -f.angle; }
    if (f.y > window.innerHeight - 40) { f.y = window.innerHeight - 40; f.angle = -f.angle; }

    /* Apply position */
    f.el.style.left = f.x + "px";
    f.el.style.top = f.y + "px";

    /* Smooth rotation */
    let deg = f.angle * 180 / Math.PI;
    f.el.style.transform = `rotate(${deg}deg)`;
  }
}

/* -------------------------------------
   GAME LOOP
-------------------------------------- */
setInterval(() => {

  /* Hunger / health effects */
  fishList.forEach(f => {
    f.hunger = Math.min(100, f.hunger + 1.2);

    if (f.hunger > 70) {
      f.health = Math.max(0, f.health - 0.8);
    }

    coins += f.health / 400;  /* passive income */
  });

  document.getElementById("coinCount").textContent = Math.floor(coins);

  updateFish();
}, 40);

/* -------------------------------------
   STARTING FISH
-------------------------------------- */
addFish();
addFish();

</script>
</body>
</html>
