<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Mini Fish Tycoon</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root {
      --bg: #03121d;
      --card: #062131;
      --accent: #4fd1ff;
      --accent-soft: rgba(79, 209, 255, 0.18);
      --text: #f5f7fb;
      --muted: #9ba7ba;
      --danger: #ff6b6b;
      --success: #4dff91;
      --border: #113347;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 16px;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
      background: radial-gradient(circle at top, #09324a 0, #020b11 60%, #000 100%);
      color: var(--text);
    }

    h1 {
      margin: 0 0 4px;
      font-size: 1.7rem;
    }

    h2 {
      margin: 0 0 8px;
      font-size: 1.1rem;
    }

    .sub {
      margin: 0 0 10px;
      color: var(--muted);
      font-size: 0.9rem;
    }

    .shell {
      max-width: 900px;
      margin: 0 auto;
    }

    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: flex-end;
      gap: 10px;
      margin-bottom: 14px;
    }

    .pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 9px;
      border-radius: 999px;
      border: 1px solid var(--accent-soft);
      background: var(--accent-soft);
      color: var(--accent);
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    .pill-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--accent);
    }

    .grid {
      display: grid;
      grid-template-columns: 1.1fr 1fr;
      gap: 14px;
    }

    @media (max-width: 800px) {
      .grid {
        grid-template-columns: 1fr;
      }
    }

    .card {
      border-radius: 14px;
      border: 1px solid var(--border);
      background: var(--card);
      padding: 12px 12px 10px;
    }

    .stat-row {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      font-size: 0.9rem;
      margin-bottom: 6px;
    }

    .stat {
      padding: 4px 8px;
      border-radius: 999px;
      background: rgba(0, 0, 0, 0.35);
      border: 1px solid var(--border);
    }

    .stat span {
      color: var(--muted);
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    .stat strong {
      margin-left: 4px;
    }

    .tank {
      margin-top: 6px;
      border-radius: 12px;
      padding: 10px;
      background: radial-gradient(circle at top, #0b405a 0, #021018 60%);
      border: 1px solid #0b3b54;
      min-height: 120px;
      position: relative;
      overflow: hidden;
    }

    .tank-waterline {
      position: absolute;
      inset: 0;
      background: linear-gradient(
        to top,
        rgba(0, 0, 0, 0.55),
        rgba(255, 255, 255, 0.04)
      );
      pointer-events: none;
    }

    .fish {
      position: absolute;
      font-size: 1.3rem;
      white-space: nowrap;
      transition: transform 0.2s;
    }

    .fish.small {
      font-size: 0.9rem;
      opacity: 0.85;
    }
    .fish.medium {
      font-size: 1.3rem;
    }
    .fish.large {
      font-size: 1.7rem;
    }

    .fish:hover {
      transform: scale(1.1);
    }

    .fish-label {
      position: absolute;
      bottom: 2px;
      left: 4px;
      right: 4px;
      padding: 3px 6px;
      border-radius: 999px;
      background: rgba(0, 0, 0, 0.55);
      font-size: 0.7rem;
      color: var(--muted);
      display: flex;
      justify-content: space-between;
      gap: 4px;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      font-size: 0.75rem;
      padding: 2px 6px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: rgba(0, 0, 0, 0.3);
      color: var(--muted);
    }

    .badge-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: #ffd66b;
    }

    .shop-row {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-top: 6px;
    }

    .shop-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      padding: 6px 8px;
      border-radius: 10px;
      background: rgba(0, 0, 0, 0.3);
      border: 1px solid var(--border);
      font-size: 0.9rem;
    }

    .shop-main {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .shop-emoji {
      font-size: 1.5rem;
    }

    .shop-meta {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .shop-meta span {
      color: var(--muted);
      font-size: 0.8rem;
    }

    button {
      border-radius: 999px;
      border: 1px solid var(--accent);
      background: var(--accent-soft);
      color: var(--accent);
      padding: 6px 12px;
      font-size: 0.85rem;
      cursor: pointer;
      font-weight: 600;
      letter-spacing: 0.04em;
      text-transform: uppercase;
    }

    button:hover:not(:disabled) {
      background: rgba(79, 209, 255, 0.28);
    }

    button:disabled {
      opacity: 0.5;
      cursor: default;
    }

    .btn-danger {
      border-color: var(--danger);
      color: var(--danger);
      background: rgba(255, 107, 107, 0.15);
    }

    .log {
      margin-top: 8px;
      max-height: 160px;
      overflow-y: auto;
      font-size: 0.8rem;
      color: var(--muted);
    }

    .log-entry {
      margin-bottom: 3px;
    }

    .log-entry strong {
      color: #ffffff;
    }

    .hint {
      font-size: 0.8rem;
      color: var(--muted);
      margin-top: 4px;
    }
  </style>
</head>
<body>
  <div class="shell">
    <div class="top-bar">
      <div>
        <h1>Mini Fish Tycoon</h1>
        <p class="sub">
          Buy fish, let them grow, sell them for profit. Keep an eye on your tank capacity!
        </p>
        <div class="pill">
          <span class="pill-dot"></span>
          v0.1 ‚Äì basic prototype
        </div>
      </div>
      <div class="stat-row">
        <div class="stat">
          <span>Money</span><strong id="moneyDisplay">$100</strong>
        </div>
        <div class="stat">
          <span>Fish</span><strong id="fishCount">0</strong>
        </div>
        <div class="stat">
          <span>Capacity</span><strong id="capacityDisplay">0 / 12</strong>
        </div>
        <div class="stat">
          <span>Day</span><strong id="dayDisplay">1</strong>
        </div>
      </div>
    </div>

    <div class="grid">
      <!-- LEFT SIDE: Tank -->
      <div class="card">
        <h2>Your tank</h2>
        <p class="sub">
          Fish grow over time. Bigger fish sell for more. Overcrowding = more stress.
        </p>
        <div class="tank" id="tank">
          <div class="tank-waterline"></div>
          <!-- fish are rendered here -->
        </div>
        <div class="hint" id="tankHint">
          Tip: Start with cheap fish, grow them to medium or large, then sell.
        </div>
      </div>

      <!-- RIGHT SIDE: Shop & log -->
      <div class="card">
        <h2>Fish shop</h2>
        <p class="sub">Buy fish, then sell them once they grow.</p>

        <div class="shop-row" id="shop">
          <!-- shop items go here -->
        </div>

        <div class="hint">
          Fish grow from small ‚Üí medium ‚Üí large over time. Medium/large fish sell for more.
        </div>

        <h2 style="margin-top:14px;">Activity log</h2>
        <div class="log" id="log"></div>
      </div>
    </div>
  </div>

  <script>
    // ===== GAME DATA =====
    const fishTypes = [
      {
        id: "guppy",
        name: "Guppy",
        emoji: "üêü",
        buyPrice: 10,
        sellSmall: 6,
        sellMedium: 14,
        sellLarge: 25,
        growthTime: 20, // seconds from small to medium to large
        description: "Cheap starter fish. Grows fairly quickly."
      },
      {
        id: "clown",
        name: "Clownfish",
        emoji: "üê†",
        buyPrice: 30,
        sellSmall: 18,
        sellMedium: 40,
        sellLarge: 75,
        growthTime: 35,
        description: "Colourful and valuable. Takes a bit longer to grow."
      },
      {
        id: "angel",
        name: "Angelfish",
        emoji: "üê°",
        buyPrice: 55,
        sellSmall: 35,
        sellMedium: 80,
        sellLarge: 140,
        growthTime: 50,
        description: "Fancy fish. Slow to grow, but sells for a lot."
      }
    ];

    let money = 100;
    let day = 1;
    const tankCapacity = 12;
    let fishInTank = []; // each: {id, typeId, ageSec, createdAt}

    const moneyDisplay = document.getElementById("moneyDisplay");
    const fishCountDisplay = document.getElementById("fishCount");
    const capacityDisplay = document.getElementById("capacityDisplay");
    const dayDisplay = document.getElementById("dayDisplay");
    const tankEl = document.getElementById("tank");
    const tankHint = document.getElementById("tankHint");
    const shopEl = document.getElementById("shop");
    const logEl = document.getElementById("log");

    // ===== UTILS =====
    function log(message, type = "normal") {
      const div = document.createElement("div");
      div.className = "log-entry";
      if (type === "good") {
        div.innerHTML = `<strong>+ </strong>${message}`;
      } else if (type === "bad") {
        div.innerHTML = `<strong>! </strong>${message}`;
      } else {
        div.textContent = message;
      }
      logEl.prepend(div);
    }

    function updateStats() {
      moneyDisplay.textContent = `$${money}`;
      fishCountDisplay.textContent = fishInTank.length;
      capacityDisplay.textContent = `${fishInTank.length} / ${tankCapacity}`;
      dayDisplay.textContent = day;
    }

    function getFishType(typeId) {
      return fishTypes.find(t => t.id === typeId);
    }

    function getSizeStage(ageSec, growthTime) {
      if (ageSec < growthTime) return "small";
      if (ageSec < growthTime * 2) return "medium";
      return "large";
    }

    function getSellPrice(fish) {
      const type = getFishType(fish.typeId);
      if (!type) return 0;
      const stage = getSizeStage(fish.ageSec, type.growthTime);
      if (stage === "small") return type.sellSmall;
      if (stage === "medium") return type.sellMedium;
      return type.sellLarge;
    }

    // ===== SHOP RENDERING =====
    function renderShop() {
      shopEl.innerHTML = "";
      fishTypes.forEach(type => {
        const div = document.createElement("div");
        div.className = "shop-item";

        const main = document.createElement("div");
        main.className = "shop-main";

        const emoji = document.createElement("div");
        emoji.className = "shop-emoji";
        emoji.textContent = type.emoji;

        const meta = document.createElement("div");
        meta.className = "shop-meta";
        meta.innerHTML = `
          <strong>${type.name}</strong>
          <span>Buy: $${type.buyPrice} ¬∑ S/M/L sell: $${type.sellSmall} / $${type.sellMedium} / $${type.sellLarge}</span>
          <span>${type.description}</span>
        `;

        main.appendChild(emoji);
        main.appendChild(meta);

        const btn = document.createElement("button");
        btn.textContent = "Buy";
        btn.onclick = () => buyFish(type.id);

        div.appendChild(main);
        div.appendChild(btn);
        shopEl.appendChild(div);
      });

      const sellAllBtn = document.createElement("button");
      sellAllBtn.textContent = "Sell all large fish";
      sellAllBtn.className = "btn-danger";
      sellAllBtn.style.marginTop = "6px";
      sellAllBtn.onclick = sellAllLarge;
      shopEl.appendChild(sellAllBtn);
    }

    // ===== GAME ACTIONS =====
    function buyFish(typeId) {
      const type = getFishType(typeId);
      if (!type) return;

      if (fishInTank.length >= tankCapacity) {
        log("Tank is full! Sell some fish before buying more.", "bad");
        return;
      }

      if (money < type.buyPrice) {
        log("Not enough money to buy " + type.name + ".", "bad");
        return;
      }

      money -= type.buyPrice;
      fishInTank.push({
        id: "fish_" + Date.now() + "_" + Math.random().toString(16).slice(2),
        typeId,
        ageSec: 0,
        createdAt: Date.now()
      });

      log("Bought a " + type.name + ".", "good");
      updateStats();
      renderTank();
    }

    function sellFish(fishId) {
      const idx = fishInTank.findIndex(f => f.id === fishId);
      if (idx === -1) return;
      const fish = fishInTank[idx];
      const type = getFishType(fish.typeId);
      if (!type) return;

      const price = getSellPrice(fish);
      money += price;
      fishInTank.splice(idx, 1);

      log(`Sold a ${type.name} for $${price}.`, "good");
      updateStats();
      renderTank();
    }

    function sellAllLarge() {
      if (fishInTank.length === 0) {
        log("No fish to sell.", "bad");
        return;
      }
      let soldCount = 0;
      let totalEarned = 0;
      const remaining = [];
      for (const fish of fishInTank) {
        const type = getFishType(fish.typeId);
        if (!type) continue;
        const stage = getSizeStage(fish.ageSec, type.growthTime);
        if (stage === "large") {
          const price = getSellPrice(fish);
          soldCount++;
          totalEarned += price;
        } else {
          remaining.push(fish);
        }
      }
      if (soldCount === 0) {
        log("No large fish to sell yet.", "bad");
        return;
      }
      fishInTank = remaining;
      money += totalEarned;
      log(`Sold ${soldCount} large fish for $${totalEarned}.`, "good");
      updateStats();
      renderTank();
    }

    // ===== RENDER TANK =====
    function renderTank() {
      tankEl.querySelectorAll(".fish").forEach(el => el.remove());
      const width = tankEl.clientWidth;
      const height = tankEl.clientHeight;

      fishInTank.forEach(fish => {
        const type = getFishType(fish.typeId);
        if (!type) return;
        const stage = getSizeStage(fish.ageSec, type.growthTime);

        const fishEl = document.createElement("div");
        fishEl.className = "fish " + stage;

        const x = Math.random() * (width - 60);
        const y = Math.random() * (height - 60);
        fishEl.style.left = x + "px";
        fishEl.style.top = y + "px";

        fishEl.textContent = type.emoji;

        const label = document.createElement("div");
        label.className = "fish-label";
        label.innerHTML = `
          <span>${type.name}</span>
          <span>${stage.toUpperCase()}</span>
        `;
        fishEl.appendChild(label);

        fishEl.onclick = () => {
          const price = getSellPrice(fish);
          if (confirm(`Sell this ${type.name} (${stage}) for $${price}?`)) {
            sellFish(fish.id);
          }
        };

        tankEl.appendChild(fishEl);
      });

      if (fishInTank.length > tankCapacity * 0.8) {
        tankHint.textContent = "Your tank is getting crowded. Sell some fish before buying more.";
      } else {
        tankHint.textContent = "Tip: Grow fish to medium/large before selling for more profit.";
      }
    }

    // ===== TICK LOOP =====
    function gameTick() {
      // age fish
      fishInTank.forEach(fish => {
        fish.ageSec += 1;
      });

      // every 30 seconds = 1 in-game "day"
      if (Date.now() % 30000 < 1000) {
        day++;
      }

      updateStats();
      renderTank();
    }

    // ===== INIT =====
    function init() {
      updateStats();
      renderShop();
      renderTank();
      log("Game started. You have $100 and an empty tank.");
      setInterval(gameTick, 1000); // 1 second = 1 tick
    }

    init();
  </script>
</body>
</html>
